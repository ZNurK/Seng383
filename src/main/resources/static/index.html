<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task & Wish Manager</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="prelogin">
    <div id="role-overlay" class="role-overlay visible" aria-modal="true" role="dialog">
        <div class="role-modal">
            <h1>Choose a role to continue</h1>
            <p class="role-subtitle">Log in as Child, Parent, or Teacher. No password required.</p>
            <div class="role-grid">
                <button class="role-card" data-role="child">
                    <span class="role-icon" aria-hidden="true">üßí</span>
                    <span class="role-label">Child</span>
                    <span class="role-desc">Complete tasks, add wishes, see progress.</span>
                </button>
                <button class="role-card" data-role="parent">
                    <span class="role-icon" aria-hidden="true">üßë‚Äçü¶∞</span>
                    <span class="role-label">Parent</span>
                    <span class="role-desc">Add/approve tasks and wishes, manage coins.</span>
                </button>
                <button class="role-card" data-role="teacher">
                    <span class="role-icon" aria-hidden="true">üë©‚Äçüè´</span>
                    <span class="role-label">Teacher</span>
                    <span class="role-desc">Add school tasks and rate completed work.</span>
                </button>
            </div>
        </div>
    </div>

    <div class="app-shell app-shell-locked" aria-live="polite">
        <header>
            <div class="title-block">
                <div>
                    <h1>Task & Wish Manager</h1>
                    <p>Visual dashboards for progress, approvals, and rewards.</p>
                </div>
                <div class="role-status">
                    <span id="role-pill" class="role-pill">Not logged in</span>
                    <button id="change-role-btn" class="btn ghost">Switch role</button>
                </div>
            </div>
            <div class="status-bar">
                <div class="status-item">
                    <span class="label">Coins</span>
                    <strong id="budget">0</strong>
                </div>
                <div class="status-item">
                    <span class="label">Level</span>
                    <strong id="level">1</strong>
                </div>
                <div class="status-item grow">
                    <div class="status-heading">
                        <span class="label">Progress to next level</span>
                        <span id="level-progress-label">0%</span>
                    </div>
                    <div class="progress-track">
                        <div id="points-progress" class="progress-fill"></div>
                    </div>
                </div>
            </div>
        </header>

        <div class="alert" role="alert"></div>

        <nav class="tabs">
            <button class="tab-btn active" data-tab="dashboard" data-visible-for="child,parent,teacher">üè† Dashboard</button>
            <button class="tab-btn" data-tab="tasks" data-visible-for="child,parent,teacher">üìã Tasks</button>
            <button class="tab-btn" data-tab="wishes" data-visible-for="child,parent,teacher">üéÅ Wishes</button>
            <button class="tab-btn" data-tab="add-task" data-visible-for="parent,teacher">‚ûï Add Task</button>
            <button class="tab-btn" data-tab="add-wish" data-visible-for="child,parent">üí° Add Wish</button>
        </nav>

        <section id="dashboard-tab" class="tab-content active" data-visible-for="child,parent,teacher">
            <div class="grid two">
                <div class="panel">
                    <div class="panel-heading">
                        <h2>Task Overview</h2>
                        <p>Quick look at daily responsibilities.</p>
                    </div>
                    <div class="metrics">
                        <div>
                            <span>Total tasks</span>
                            <strong id="metric-total-tasks">0</strong>
                        </div>
                        <div>
                            <span>Completed</span>
                            <strong id="metric-completed-tasks">0</strong>
                        </div>
                        <div>
                            <span>Completion rate</span>
                            <strong id="metric-completion-rate">0%</strong>
                        </div>
                    </div>
                    <div class="timeline">
                        <div>
                            <span>Due today</span>
                            <strong id="metric-daily-tasks">0</strong>
                        </div>
                        <div>
                            <span>Due this week</span>
                            <strong id="metric-weekly-tasks">0</strong>
                        </div>
                        <div>
                            <span>Awaiting approval</span>
                            <strong id="metric-awaiting-review">0</strong>
                        </div>
                    </div>
                </div>
                <div class="panel">
                    <div class="panel-heading">
                        <h2>Wish & Level Insights</h2>
                        <p>Track motivations, approvals, and reward eligibility.</p>
                    </div>
                    <div class="metrics">
                        <div>
                            <span>Active wishes</span>
                            <strong id="metric-active-wishes">0</strong>
                        </div>
                        <div>
                            <span>Pending approvals</span>
                            <strong id="metric-pending-wishes">0</strong>
                        </div>
                        <div>
                            <span>Eligible wishes</span>
                            <strong id="metric-eligible-wishes">0</strong>
                        </div>
                    </div>
                    <div class="dashboard-note">
                        <p>Only wishes at or below the child‚Äôs level are shown to the child.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="tasks-tab" class="tab-content" data-visible-for="child,parent,teacher">
            <div class="panel">
                <div class="panel-heading">
                    <h2>Tasks</h2>
                    <p>Filter and manage all family and school tasks.</p>
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="daily">Today</button>
                    <button class="filter-btn" data-filter="weekly">This week</button>
                </div>
                <div id="tasks-list" class="items-list"></div>
            </div>
        </section>

        <section id="wishes-tab" class="tab-content" data-visible-for="child,parent,teacher">
            <div class="panel">
                <div class="panel-heading">
                    <h2>Wishes</h2>
                    <p>Requests for rewards, experiences, or items.</p>
                </div>
                <div id="wishes-list" class="items-list"></div>
            </div>
        </section>

        <section id="add-task-tab" class="tab-content" data-visible-for="parent,teacher">
            <div class="panel">
                <div class="panel-heading">
                    <h2>Create a task</h2>
                    <p>Parents and teachers can schedule new responsibilities.</p>
                </div>
                <form id="add-task-form" class="form">
                    <div class="info-callout">
                        <p>Logged-in role automatically becomes the assigner. Teacher ‚Üí ‚ÄúT‚Äù, Parent ‚Üí ‚ÄúP‚Äù.</p>
                    </div>
                    <div class="form-group">
                        <label>Task ID</label>
                        <input type="number" id="task-id" required>
                    </div>
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="task-title" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="task-description" required></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Start date</label>
                            <input type="date" id="task-start-date">
                        </div>
                        <div class="form-group">
                            <label>Start time</label>
                            <input type="time" id="task-start-time">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>End date</label>
                            <input type="date" id="task-end-date">
                        </div>
                        <div class="form-group">
                            <label>End time</label>
                            <input type="time" id="task-end-time">
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Reward (coins)</label>
                        <input type="number" id="task-coin" required min="0">
                    </div>
                    <button type="submit" class="btn btn-primary">Save task</button>
                </form>
            </div>
        </section>

        <section id="add-wish-tab" class="tab-content" data-visible-for="child,parent">
            <div class="panel">
                <div class="panel-heading">
                    <h2>Submit a wish</h2>
                    <p>Children can request rewards. Parents may also log wishes to track promises.</p>
                </div>
                <form id="add-wish-form" class="form">
                    <div class="form-group">
                        <label>Wish ID</label>
                        <input type="text" id="wish-id" required>
                    </div>
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="wish-title" required>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="wish-description" required></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Start date</label>
                            <input type="date" id="wish-start-date">
                        </div>
                        <div class="form-group">
                            <label>Start time</label>
                            <input type="time" id="wish-start-time">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>End date</label>
                            <input type="date" id="wish-end-date">
                        </div>
                        <div class="form-group">
                            <label>End time</label>
                            <input type="time" id="wish-end-time">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">Save wish</button>
                </form>
            </div>
        </section>
    </div>

    <script src="app.js"></script>
</body>
</html>

